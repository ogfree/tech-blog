<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [

    /* =========================
       ORGANIZATION
    ========================== */
    {
      "@type": "Organization",
      "@id": "{{ .Site.BaseURL }}#organization",
      "name": "{{ .Site.Title }}",
      "url": "{{ .Site.BaseURL }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ (.Site.Params.logo | default "/images/default-share.png") | absURL }}"
      }{{ with .Site.Params.social }},
      "sameAs": [
        {{- range $i, $s := . -}}
          "{{ $s.url }}"{{ if lt (add $i 1) (len .) }},{{ end }}
        {{- end -}}
      ]
      {{- end }}
    },

    /* =========================
       WEBSITE
    ========================== */
    {
      "@type": "WebSite",
      "@id": "{{ .Site.BaseURL }}#website",
      "name": "{{ .Site.Title }}",
      "url": "{{ .Site.BaseURL }}",
      "publisher": {
        "@id": "{{ .Site.BaseURL }}#organization"
      },
      "inLanguage": "en",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "{{ printf "%ssearch/?q={search_term_string}" .Site.BaseURL }}",
        "query-input": "required name=search_term_string"
      }
    }

    {{- if .IsPage }},

    /* =========================
       WEBPAGE
    ========================== */
    {
      "@type": "WebPage",
      "@id": "{{ .Permalink }}#webpage",
      "url": "{{ .Permalink }}",
      "name": "{{ .Title | plainify | htmlUnescape }}",
      "isPartOf": {
        "@id": "{{ .Site.BaseURL }}#website"
      },
      "breadcrumb": {
        "@id": "{{ .Permalink }}#breadcrumb"
      },
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "{{ (.Params.image | default .Site.Params.defaultImage | default "/images/default-share.png") | absURL }}"
      }
    },

    /* =========================
       BLOG POSTING / NEWS ARTICLE
    ========================== */
    {
      "@type": "{{ .Params.structured_data | default "BlogPosting" }}",
      "@id": "{{ .Permalink }}#blogposting",
      "headline": "{{ .Title | plainify | htmlUnescape }}",
      "description": "{{ with .Params.description }}{{ . | plainify | htmlUnescape }}{{ else }}{{ .Summary | plainify | htmlUnescape }}{{ end }}",
      "image": {
        "@type": "ImageObject",
        "url": "{{ (.Params.image | default .Site.Params.defaultImage | default "/images/default-share.png") | absURL }}",
        "width": 1200,
        "height": 675
      },
      "datePublished": "{{ (or .PublishDate .Date).Format "2006-01-02T15:04:05Z07:00" }}",
      "dateModified": "{{ (or .Lastmod .Date).Format "2006-01-02T15:04:05Z07:00" }}",

      /* ===== ARTICLE SECTION ===== */
      "articleSection": "{{- with .Params.categories -}}{{ index . 0 | plainify | htmlUnescape -}}{{- else -}}{{- with .Params.tags -}}{{ index . 0 | plainify | htmlUnescape -}}{{- else -}}Technology{{- end -}}{{- end -}}",

      /* ===== KEYWORDS ===== */
      "keywords": [
        {{- $kw := .Params.keywords -}}
        {{- if $kw -}}
          {{- range $i, $k := $kw -}}
            "{{ $k | plainify | htmlUnescape }}"{{ if lt (add $i 1) (len $kw) }},{{ end }}
          {{- end -}}
        {{- else -}}
          "Technology",
          "{{ .Site.Title }}"
        {{- end -}}
      ],

      "inLanguage": "en",
      "isAccessibleForFree": true,
      "author": {
        "@type": "Person",
        "@id": "{{ .Site.BaseURL }}about/#author",
        "name": "{{ .Site.Params.author.name | default "Techra Editorial" }}",
        "url": "{{ .Site.BaseURL }}about/"
      },
      "publisher": {
        "@id": "{{ .Site.BaseURL }}#organization"
      },
      "mainEntityOfPage": {
        "@id": "{{ .Permalink }}#webpage"
      }
    },

    /* =========================
       BREADCRUMBS
    ========================== */
    {
        "@type": "BreadcrumbList",
        "@id": "{{ .Permalink }}#breadcrumb",
        "name": "Breadcrumbs for {{ .Title | plainify | htmlUnescape }}",
        "itemListElement": [
        {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ .Site.BaseURL }}"
        }{{ with .Params.categories }}
        {{- $pos := 2 -}}
        {{- range $i, $cat := . }}
        ,{
        "@type": "ListItem",
        "position": {{ add $pos $i }},
        "name": "{{ $cat | humanize | title }}",
        "item": "{{ printf "%s%s/" $.Site.BaseURL ($cat | urlize) }}"
        }
        {{- end }}
        ,{
        "@type": "ListItem",
        "position": {{ add 2 (len .) }},
        "name": "{{ $.Title | plainify | htmlUnescape }}",
        "item": "{{ $.Permalink }}"
        }
        {{- else }}
        ,{
        "@type": "ListItem",
        "position": 2,
        "name": "{{ .Title | plainify | htmlUnescape }}",
        "item": "{{ .Permalink }}"
        }
        {{- end }}
        ]
    }


    {{- end }}

  ]
}
</script>
